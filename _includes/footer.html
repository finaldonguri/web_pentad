<!-- 空にするとフッターなし -->
<!-- Mermaid を読み込んで、```mermaid フェンスを描画する -->
<script type="module">
  // Mermaid 本体をCDNから読み込み
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

  // GitHub Pages（Jekyll）の Markdown は
  // ```mermaid → <pre><code class="language-mermaid">…</code></pre>
  // になることがあるので、div.mermaid に差し替えてから実行する。
  function upgradeMermaidCodeBlocks() {
    document.querySelectorAll('pre > code.language-mermaid').forEach(($code) => {
      const $pre = $code.parentElement;
      const $div = document.createElement('div');
      $div.className = 'mermaid';
      $div.textContent = $code.textContent;
      $pre.replaceWith($div);
    });
  }

  mermaid.initialize({ startOnLoad: false });
  upgradeMermaidCodeBlocks();
  // ページ内に mermaid ブロックが複数あっても全部描画
  mermaid.run({
    querySelector: '.mermaid'
  });
</script>
